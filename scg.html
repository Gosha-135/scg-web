<!DOCTYPE html>
<html lang="en">
	<head>
		<title>SCg-viewer test</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<style>
			body {
				background-color: #fff;
				margin: 0px;
				overflow: hidden;
				font-family:Monospace;
				font-size:13px;
				text-align:center;
				font-weight: bold;
				text-align:center;
			}

			#info {
				color:#000;
				position: absolute;
				top: 0px; width: 100%;
				padding: 5px;
				z-index:100;
			}
			
			.scg-viewer {
				background-color: #eee;
				/*width: 900px;
				height: 800px;*/
				margin: 0 auto;
				border-color: #ddd;
				border-style: solid;
				border-width: 1px;
			}

		</style>
		
		<link href="css/scg.css" rel="stylesheet">
	</head>
	<body>

		<script type="text/javascript" src="js/d3.js"></script>
		<script type="text/javascript" src="js/jquery/jquery-1.8.3.min.js"></script>
		<script type="text/javascript" src="js/jquery/jquery.namespace.js"></script>
		<script type="text/javascript" src="js/Constants.js"></script>
		
		<script type="text/javascript" src="scg.js"></script>
		
		<script type="text/javascript">
			$(document).ready(function() {
				var viewer = new SCg.Viewer();
				viewer.init({container: "#scg-viewer"});

				var types = [
					sc_type_node,
	 				sc_type_node | sc_type_const,
	 				sc_type_node | sc_type_const | sc_type_node_material,
	 				sc_type_node | sc_type_const | sc_type_node_abstract,
	 				sc_type_node | sc_type_const | sc_type_node_class,
	 				sc_type_node | sc_type_const | sc_type_node_struct,
	 				sc_type_node | sc_type_const | sc_type_node_norole,
	 				sc_type_node | sc_type_const | sc_type_node_role,
	 				sc_type_node | sc_type_const | sc_type_node_tuple,

	 				sc_type_node | sc_type_var,
	 				sc_type_node | sc_type_var | sc_type_node_material,
	 				sc_type_node | sc_type_var | sc_type_node_abstract,
	 				sc_type_node | sc_type_var | sc_type_node_class,
	 				sc_type_node | sc_type_var | sc_type_node_struct,
	 				sc_type_node | sc_type_var | sc_type_node_norole,
	 				sc_type_node | sc_type_var | sc_type_node_role,
	 				sc_type_node | sc_type_var | sc_type_node_tuple
				];

				nodes = [];
				for (var i = 0; i < 10; i++)
				{
					var model_node = new SCg.ModelNode({ 
						position: new SCg.Vector3(900 * Math.random(), 600 * Math.random(), 0), //1000 * Math.random() - 500), 
						scale: new SCg.Vector2(20, 20),
						sc_type: types[Math.floor((Math.random() * types.length))],
						text: "Object_" + i.toString()
					});
					viewer.scene.appendNode(model_node);

					nodes.push(model_node);
				}

				for (var i = 0; i < 10; i++)
				{
					var n1 = 0;
					var n2 = 0;
					while (n1 === n2) {
						n1 = Math.floor((Math.random() * nodes.length));
						n2 = Math.floor((Math.random() * nodes.length));
					}
					var model_edge = new SCg.ModelEdge({
						begin: nodes[n1],
						end: nodes[n2],
						sc_type: sc_type_arc_access | sc_type_arc_perm | sc_type_arc_neg | sc_type_const
					});

					viewer.scene.appendEdge(model_edge);
				}
				
				// contour
				var model_contour = new SCg.ModelContour({});
				viewer.scene.appendContour(model_contour);
				for (var i = 0; i < nodes.length / 4; i++)
				{
					model_contour.addChild(nodes[i]);
				}
				
				viewer.render.update();
				viewer.render.relayout();
			});
		</script>
		
		<div class="scg-viewer" id="scg-viewer"></div>
	</body>
</html>
